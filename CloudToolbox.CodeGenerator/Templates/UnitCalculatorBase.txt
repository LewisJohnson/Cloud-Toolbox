using Microsoft.AspNetCore.Components;

using CloudToolbox.Calculators.Unit;
using CloudToolbox.Common.Enums;
using CloudToolbox.Common.Enums.Units;
using CloudToolbox.Common.Models.Calculator;
using CloudToolbox.Data.DisplayCalculatorCollections;

namespace CloudToolbox.Components.Toolbox.Units
{
	public partial class #{FROM}To#{TO}Base : ComponentBase
	{
		public List<CalculatorInput> Inputs => new() { new("Number", typeof(string)) { EndInputGroupText = "#{FROM_SHORT_HAND}" } };

		public List<CalculatorResult> ResultsTemplate => new() { new CalculatorResult(null) { EndInputGroupText = "#{TO_SHORT_HAND}" } };

		protected async Task<List<CalculatorResult>> OnChange(List<CalculatorInput> inputs)
		{
			var results = new List<CalculatorResult>();

			double? input = inputs[0].InputDouble;

			if (input != null)
			{
				double converted = new #{UNIT_ENUM}Converter((#{UNIT_ENUM}.#{FROM}, #{UNIT_ENUM}.#{TO})).Convert(input.Value);
				string res = converted.ToString(Constants.FRONTEND_NUMBER_FORMAT);

				results.Add(new(res) { EndInputGroupText = "#{TO_SHORT_HAND}" });
			}

			return results;
		}
	}
}
