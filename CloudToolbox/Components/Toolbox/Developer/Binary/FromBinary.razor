@attribute [Route(Routes.DEVELOPER_FROM_BINARY)]

@namespace CloudToolbox.Components.Toolbox.Developer

@using System.Text;
@using CloudToolbox.Data;
@using CloudToolbox.Common.Routes;
@using CloudToolbox.Components.Toolbox.Shared;

<ToolboxHeader Title="From Binary"
               Description="Converts a hexadecimal byte string back into its raw value" 
/>

<InputOutput onChangeEvent="@OnChange" />

@code {
    public async Task<string> OnChange(string input)
    {
        if (input != null)
        {
            try
            {
                var str = input.Replace(" ", "");

                StringBuilder sb = new StringBuilder();
                while (str.Length > 0)
                {
                    string block = str.Substring(0, 8);
                    str = str.Substring(8);
                    int value = 0;
                    foreach (int x in block)
                    {
                        int temp = x - 48;
                        value = (value << 1) | temp;
                    }
                    sb.Append(Convert.ToChar(value));
                }

                return sb.ToString();
            } catch (Exception _)
            {
                return "Invalid input";
            }
        }

        return string.Empty;
    }

}
